(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},108:function(e,t,n){},112:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(24),o=n.n(c),i=n(25),s=n(31),l=n(118),m=n(119),u=n(14),p=n(36),f=n(57),d=n(54),g=n(16),h="GET_PROFILE_DETAILS",v="GET_PROFILE_DETAILS_SUCCESS",b="LIKE_POST",E="COMMENT_POST",k="ADD_POST",O="DELETE_POST",w=Object(g.fromJS)({profileDetails:[]});var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return e.set("profileDetails",Object(g.fromJS)(t.profileDetails));default:return e}},y=Object(d.combineReducers)({AppReducer:j}),S=n(7),I=n.n(S),N=n(58),D=n(12),x=n(59),P=n(26),C=n.n(P),A=function(e){return{type:v,profileDetails:e}},J=n(55),T=n.n(J);function R(){return T.a.get("https://cors-anywhere.herokuapp.com/http://starlord.hackerearth.com/insta",{headers:{"Access-Control-Allow-Origin":"*"},crossdomain:!0}).then(function(e){return e.data}).catch(function(e){throw e})}var L=I.a.mark(B),M=I.a.mark(K),U=I.a.mark($),_=I.a.mark(q),W=I.a.mark(Q),Y=I.a.mark(V),z=I.a.mark(X),F=I.a.mark(Z),H=I.a.mark(ee),G=I.a.mark(te);function B(){var e;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e="",e=localStorage.getItem("profileDetails")){t.next=11;break}return t.next=6,Object(D.b)(R);case 6:e=(e=t.sent).map(function(e){return Object(x.a)({},e,{liked:!1,comments:[]})}),localStorage.setItem("profileDetails",JSON.stringify(e)),t.next=12;break;case 11:e=JSON.parse(e);case 12:return t.next=14,Object(D.c)(A(e));case 14:t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:case"end":return t.stop()}},L,this,[[0,16]])}function K(e){var t;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t="",(t=JSON.parse(localStorage.getItem("profileDetails")))[e.id].liked?(t[e.id].liked=!1,t[e.id].likes=+t[e.id].likes-1):(t[e.id].liked=!0,t[e.id].likes=+t[e.id].likes+1),localStorage.setItem("profileDetails",JSON.stringify(t)),n.next=7,Object(D.c)(A(t));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}},M,this,[[0,9]])}function $(e){var t;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t="",t=JSON.parse(localStorage.getItem("profileDetails")),console.log(e),t[e.payload.id].comments.unshift({data:e.payload.comment,timestamp:C()().format("YYYY-MM-DD HH:mm:ss")}),localStorage.setItem("profileDetails",JSON.stringify(t)),n.next=8,Object(D.c)(A(t));case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:case"end":return n.stop()}},U,this,[[0,10]])}function q(e){var t;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t="",(t=JSON.parse(localStorage.getItem("profileDetails"))).unshift({Image:e.image,timestamp:C()().format("YYYY-MM-DD HH:mm:ss"),likes:0,liked:!1,comments:[]}),localStorage.setItem("profileDetails",JSON.stringify(t)),n.next=7,Object(D.c)(A(t));case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}},_,this,[[0,9]])}function Q(e){var t;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=[],JSON.parse(localStorage.getItem("profileDetails")).forEach(function(n,a){a!==e.id&&t.push(n)}),localStorage.setItem("profileDetails",JSON.stringify(t)),n.next=7,Object(D.c)(A(t));case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}},W,this,[[0,9]])}function V(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(O,Q);case 2:case"end":return e.stop()}},Y,this)}function X(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(k,q);case 2:case"end":return e.stop()}},z,this)}function Z(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(b,K);case 2:case"end":return e.stop()}},F,this)}function ee(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(E,$);case 2:case"end":return e.stop()}},H,this)}function te(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(h,B);case 2:case"end":return e.stop()}},G,this)}var ne=[te,Z,ee,X,V],ae=I.a.mark(re);function re(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)(Object(N.a)(ne.map(function(e){return e()})));case 2:case"end":return e.stop()}},ae,this)}var ce=n(17),oe=n(18),ie=n(20),se=n(19),le=n(21),me=n(6),ue=n(30),pe=n(35),fe=(n(106),function(e){function t(){var e,n;Object(ce.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(ie.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(r)))).state={dropdownOpen:!1},n.toggleDropDown=function(){var e=n.state.dropdownOpen;n.setState({dropdownOpen:!e})},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.state.dropdownOpen,t=this.props,n=t.imageDetails,a=t.openImage,c=t.likePost,o=t.id,i=t.deletePost;return r.a.createElement("div",{className:"mt-3"},r.a.createElement(me.b,null,r.a.createElement(me.d,{top:!0,width:"100%",src:n.get("Image"),alt:"Card image cap",className:"image-size pointer",onClick:function(){return a(o)}}),r.a.createElement(me.c,null,r.a.createElement(me.e,null,r.a.createElement("strong",null,n.get("liked")?r.a.createElement(ue.a,{color:"red",className:"mr-2 pointer f-1-5",onClick:function(){return c(o)}}):r.a.createElement(ue.b,{className:"mr-2 pointer f-1-3",onClick:function(){return c(o)}}),"".concat(n.get("likes")?n.get("likes"):0," Likes"),r.a.createElement("span",{className:"pl-2"},"|"),r.a.createElement(me.a,{className:"transparent-btn border-none clr-black",onClick:function(){return a(o)}},r.a.createElement("strong",null,"".concat(n.get("comments")?n.get("comments").size:0)),r.a.createElement("span",{className:"pl-2"},"Comments"))),r.a.createElement("span",{className:"float-right"},r.a.createElement(me.i,{isOpen:e,toggle:this.toggleDropDown},r.a.createElement(me.l,{className:"transparent-btn p-0"},r.a.createElement(pe.b,{color:"black"})),r.a.createElement(me.k,null,r.a.createElement(me.j,{onClick:function(){return i(o)}},"Delete"))))),r.a.createElement(me.f,null,r.a.createElement("small",null,C()(n.get("timestamp")).fromNow())))))}}]),t}(a.Component)),de=(n(108),function(e){function t(){var e,n;Object(ce.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(ie.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(r)))).state={comment:""},n.changeComment=function(e){n.setState({comment:e.target.value.trim()})},n.addComment=function(){var e=n.props,t=e.commentPost,a=e.id,r=n.state.comment;""!==r&&t(r,a),n.setState({comment:""})},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.details,n=e.likePost,c=e.id,o=e.closeModal,i=this.state.comment;return r.a.createElement(me.p,{className:"p-0"},""!==c?r.a.createElement(a.Fragment,null,r.a.createElement(me.g,{sm:7},r.a.createElement("img",{src:t.getIn([c,"Image"]),alt:"Image",className:"full-width container-image"})),r.a.createElement(me.g,{sm:5,className:"mt-3  pr-5"},r.a.createElement(me.p,null,r.a.createElement(me.g,{sm:12,className:"border-btm pb-2 mb-2"},r.a.createElement("strong",null,t.getIn([c,"liked"])?r.a.createElement(ue.a,{color:"red",className:"mr-2 pointer f-1-5",onClick:function(){return n(c)}}):r.a.createElement(ue.b,{className:"mr-2 pointer f-1-3",onClick:function(){return n(c)}}),"".concat(t.getIn([c,"likes"])?t.getIn([c,"likes"]):0," Likes")),r.a.createElement(pe.a,{onClick:o,className:"pointer float-right f-1-5"})),r.a.createElement(me.g,{sm:12,className:"comment-section"},t.getIn([c,"comments"]).map(function(e,t){return r.a.createElement("div",{key:"comment-".concat(t),className:"comment-div mb-2"},r.a.createElement("div",null,e.get("data")),r.a.createElement("small",null,C()(e.get("timestamp")).fromNow()))})),r.a.createElement(me.g,{sm:12,className:"mt-3"},r.a.createElement(me.m,{type:"textarea",value:i,onChange:this.changeComment}),r.a.createElement(me.a,{onClick:this.addComment,className:"mt-2 float-right"},"Comment"))))):null)}}]),t}(a.Component)),ge=(n(110),n(112),function(e){function t(){var e,n;Object(ce.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(ie.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(r)))).state={openImageStatus:!1,selectedId:"",imagePreviewUrl:"",fileName:""},n.closeToggle=function(){n.setState({openImageStatus:!1,details:Object(g.fromJS)([]),selectedId:""})},n.openImage=function(e){n.setState({openImageStatus:!0,selectedId:e})},n.selectImage=function(e){e.preventDefault();var t=new FileReader,a=e.target.files[0],r=["data:image/jpeg","data:image/png","data:image/jpg","data:image/JPG","data:image/JPEG"];t?(t.readAsDataURL(a),t.onloadend=function(){var e=t.result.substring(0,15),a=!1;r.forEach(function(t){e.startsWith(t)&&(a=!0)}),a&&n.setState({imagePreviewUrl:t.result})}):e.target.value=null},n.uploadImage=function(){var e=n.props.addPost,t=n.state.imagePreviewUrl;""!==t&&(e(t),n.setState({imagePreviewUrl:""})),n.fileInput.value=""},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.loadProfileDetails)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.profileDetails,a=t.likePost,c=t.commentPost,o=t.deletePost,i=this.state,s=i.openImageStatus,l=i.selectedId;return r.a.createElement(me.h,{className:"mt-90"},r.a.createElement(me.p,null,r.a.createElement(me.g,{sm:{size:3,offset:6}},r.a.createElement(me.m,{type:"file",onChange:this.selectImage,ref:function(t){return e.fileInput=t}})),r.a.createElement(me.g,{sm:3},r.a.createElement(me.a,{onClick:this.uploadImage},"Upload Post"))),r.a.createElement(me.p,null,n.size>0?n.map(function(t,n){return r.a.createElement(me.g,{sm:12,md:6,lg:4,key:n},r.a.createElement(fe,{imageDetails:t,openImage:e.openImage,likePost:a,deletePost:o,id:n}))}):null),r.a.createElement(me.n,{isOpen:s,toggle:this.closeToggle,size:"lg"},r.a.createElement(me.o,{className:"p-0"},r.a.createElement(de,{details:n,closeModal:this.closeToggle,likePost:a,id:l,commentPost:c}))))}}]),t}(a.Component)),he=(n(114),function(e){function t(){return Object(ce.a)(this,t),Object(ie.a)(this,Object(se.a)(t).apply(this,arguments))}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-secondary fixed-top navbar-shrink",id:"mainNav"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"navbar-brand js-scroll-trigger",href:"#page-top"},"ObserveAI Hackerearth Test"))),r.a.createElement(ge,this.props),r.a.createElement("div",{className:"copyright py-4 text-center text-white mt-5"},r.a.createElement("div",{className:"container"},r.a.createElement("small",null,"Copyright \xa9 Ashwani 2018"))))}}]),t}(a.Component)),ve=Object(s.connect)(function(e){return{profileDetails:e.getIn(["AppReducer","profileDetails"])}},function(e){return{loadProfileDetails:function(){return e({type:h})},likePost:function(t){return e(function(e){return{type:b,id:e}}(t))},commentPost:function(t,n){return e({type:E,payload:{comment:t,id:n}})},addPost:function(t){return e(function(e){return{type:k,image:e}}(t))},deletePost:function(t){return e(function(e){return{type:O,id:e}}(t))}}})(he),be=function(e){function t(){return Object(ce.a)(this,t),Object(ie.a)(this,Object(se.a)(t).apply(this,arguments))}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",null,"404 Page Not Found...")}}]),t}(a.Component),Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Oe=Object(u.a)(),we=Object(p.routerMiddleware)(Oe),je=Object(f.a)(),ye=i.c,Se=Object(i.d)(Object(p.connectRouter)(Oe)(y),ye(Object(i.a)(we,je)));je.run(re),o.a.render(r.a.createElement(s.Provider,{store:Se},r.a.createElement(p.ConnectedRouter,{history:Oe},r.a.createElement(l.a,null,r.a.createElement(m.a,{path:"/",component:ve}),r.a.createElement(m.a,{component:be})))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Ee?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ke(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ke(t,e)})}}()},60:function(e,t,n){e.exports=n(116)}},[[60,2,1]]]);
//# sourceMappingURL=main.ad538624.chunk.js.map